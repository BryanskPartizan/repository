'''
Приложение к теме " Работа с файлами"
Одним из распространенных файловых форматов, которые хранят в удобном виде 
информацию, является формат csv. Каждая строка в файле csv представляет 
отдельную запись или строку, которая состоит из отдельных столбцов, 
разделенных запятыми или другими разделителями. Собственно поэтому формат и называется Comma Separated Values. 
Не смотря на то, что формат csv - это формат текстовых файлов, Python 
для упрощения работы с ним предоставляет специальный встроенный модуль csv.
Рассмотрим работу модуля на примерах:
'''
#Пример 1 
#Для чтения из файла нужно создать объект reader:
import csv
path = "trailer.csv"
with open(path, "r", newline="") as file: # пустая строка позволяет корректно считывать строки из файла вне зависимости от операционной системы
    reader = csv.reader(file,delimiter=";")
    for row in reader:
        print(row[0], "  ", row[1])

#Задание 1. Считать данные из файла trailer.csv. Построить гистограммы по признаку 'Пол' и 'Отношение'.
# ______________________________________________________________

Пример 2
# Для записи надо создать объект writer:
import csv
path = "users.csv"
'''
В файл записывается двухмерный список - фактически таблица, где каждая строка представляет одного пользователя, 
а каждый пользователь содержит два поля - имя и возраст. Имеем таблицу из трех строк и двух столбцов.
'''
users = [
    ["Ivan", 28],
    ["Alice", 23],
    ["Boris", 34]
]
with open(path, "w", newline="") as file:
    writer = csv.writer(file) # создание объекта 
    writer.writerows(users) # использование метода writerows для записи в файл вложенного списка

# Теперь прочтем данные из файла users.csv
import csv
path = "users.csv"
with open(path, "r", newline="") as file:
    reader = csv.reader(file)
    for row in reader:
        print(row[0], "  ", row[1])   
 
# Задание 2. Добавить новую запись в таблицу из файла users.csv
# ____________________________________________________________________

# Пример 3.
# Использование словарей
'''
Модуль csv имеет специальные дополнительные возможности для работы со словарями. 
В частности, функция csv.DictWriter() возвращает объект writer, который позволяет записывать в файл. 
Функция csv.DictReader() возвращает объект reader для чтения из файла. Например
'''
import csv
path = "users1.csv"
users = [
    {"name": "Ivan ", "age": 22},
    {"name": "Alice", "age": 19},
    {"name": "Boris", "age": 24}
]
 
with open(path, "w", newline="") as file:
    columns = ["name", "age"]
    writer = csv.DictWriter(file, fieldnames=columns,delimiter=";")
    writer.writeheader() # запись заголовков столбцов
     
    # запись нескольких строк
    writer.writerows(users)
     
    # запись одной строки
    user = {"name" : "Denis", "age": 21}
    writer.writerow(user)
 
# прочтем записанное
with open(path, "r", newline="") as file:
    reader = csv.DictReader(file)
    for row in reader:
        print(row["name"], " ", row["age"])

# Задание 3. Сформируйте массив значений переменной x (размером не менее 1000) и вычислите 
#значения функции y = f(x) (f(x) возьмите из своего варианта задания 1 самостоятельной работы № 2) 
#в данных точках. Полученные значения x и y запишите в файл ex_1.csv (имена переменных использовать, 
#как заголовки столбцов). Из полученного файла считайте данные и постройте на их основе график функции f(x).

# __________________________________________________________________________________________________________

# Пример 4.
# при записи списка в файл используйте a) разный разделитель (',' & ';')
# b) без и с параметром  newline=""
import csv
with open("st.csv", "w") as f:
    w = csv.writer(f,delimiter=",")
    w.writerow(["один","два","три"])
    w.writerow(["четыре","пять","шесть"])

import csv
with open("st.csv", "r") as f:
    r = csv.reader(f)
    for row in r:
        print(row)

# Задание 4.Cформируйте список длиной 673 из случайных целых чисел от 1998 до 2021. 
#Полученный список запишите в файл ex_2.csv.
#Считайте данные из этого файла, отсортируйте в порядке убывания и запишите в файл ex_2_sorted.csv

# __________________________________________________________________________________________

#Задание 5. Cформируйте три списка со случайными числами от 1900 до 2021.
#Длина первого списка A – 160 элементов
#Длина второго списка B – 187 элементов.
#Длина третьего списка C – 213 элементов.
#Сформируйте список D с индексами от 1 до 214 включительно.
#Полученные списки запишите в файл ex_3.csv в виде:
#{D;A;C;B}.
# __________________________________________________________________________________________